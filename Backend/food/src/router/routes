const controller = require("../controllers/controller")
const foodController = require("../controllers/foodController")
const db = require("../config/db");
const restaurantController = require("../controllers/restaurantController");
const orderController = require("../controllers/orderController");
const multer = require('multer');
//const upload = multer({ dest: 'uploads/' }); // Set the destination for uploaded files

const storage = multer.diskStorage({
    destination: "./uploads/",
    filename: (req, file, cb) => {
        cb(null, `${Date.now()}${file.originalname}`) // Use current timestamp to avoid filename conflicts
    }
});

const upload = multer({ storage: storage });

module.exports = function(app){
    app.get("/hello", controller.Hello)
    app.post("/food", upload.single('image'), foodController.addFood)
    //app.post("/food/:idFood", upload.single('image'), foodController.updateFood)
    app.get("/food", foodController.getAllFoods)
    //app.get("/food/:idFood", foodController.getFoodById)
    //app.delete("/food/:idFood", foodController.deleteFood)
   // app.get("/food/name/:name", foodController.getFoodByName)
   // app.get("/food/category/:category", foodController.getFoodByCategory)
    app.get("/food/price", foodController.getFoodByPriceRange)
    //app.get("/food/restaurant/:restaurantId", foodController.getFoodByRestaurant)
    app.post("/restaurant", upload.single('image'), restaurantController.addRestaurant)
    app.get("/restaurant", restaurantController.getAllRestaurants)
    app.get("/restaurant/:id", restaurantController.getRestaurantById)
    app.put("/restaurant/:id", restaurantController.updateRestaurant)
    //app.delete("/restaurant/:id", restaurantController.deleteRestaurant)
    //app.get("/restaurant/name/:name", restaurantController.getRestaurantByName)
    // app.post("/order", orderController.addOrder)
    // app.get("/order", orderController.getAllOrders)
    // app.get("/order/:id", orderController.getOrderById)
    // app.put("/order/:id", orderController.updateOrder)
    // app.delete("/order/:id", orderController.deleteOrder)
    // app.get("/order/user/:userId", orderController.getOrdersByUserId)
    // app.get("/order/restaurant/:restaurantId", orderController.getOrdersByRestaurantId)
}